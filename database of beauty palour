<?php
$host = "localhost";
$user = "root";       
$pass = "";           
$dbname = "ecommerce";

try {
   
    $pdo = new PDO("mysql:host=$host", $user, $pass);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $pdo->exec("CREATE DATABASE IF NOT EXISTS $dbname");
    $pdo->exec("USE $dbname");

    
    $pdo->exec("
        CREATE TABLE IF NOT EXISTS customers (
            Customer_id INT PRIMARY KEY AUTO_INCREMENT,
            Name VARCHAR(100),
            Email VARCHAR(100) UNIQUE,
            Address VARCHAR(200)
        )
    ");

   
    $pdo->exec("
        CREATE TABLE IF NOT EXISTS products (
            Product_id INT PRIMARY KEY AUTO_INCREMENT,
            Product_Name VARCHAR(90),
            Location VARCHAR(79),
            Stock INT NOT NULL
        )
    ");

 
    $pdo->exec("
        CREATE TABLE IF NOT EXISTS orders (
            Order_id INT PRIMARY KEY AUTO_INCREMENT,
            Customer_id INT,
            Order_date DATE,
            FOREIGN KEY (Customer_id) REFERENCES customers(Customer_id)
        )
    ");

    $pdo->exec("
        CREATE TABLE IF NOT EXISTS order_items (
            Order_id INT,
            Product_id INT,
            Quantity INT NOT NULL,
            PRIMARY KEY (Order_id, Product_id),
            FOREIGN KEY (Order_id) REFERENCES orders(Order_id),
            FOREIGN KEY (Product_id) REFERENCES products(Product_id)
        )
    ");

    echo "Database and tables created successfully!";
} catch (PDOException $e) {
    echo "Error: " . $e->getMessage();
}
?>
